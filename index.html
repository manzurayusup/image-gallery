<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Image Gallery</title>
</head>

<body>
    <div id="image_container">

        <img class="small" src="flowers.jpg" alt="Flowers" data-index="0">

        <img class="small" src="bird.jpg" alt="Bird on a Branch" data-index="1">

        <img class="small" src="winter.jpg" alt="Mountains" data-index="2">

        <img class="small" src="winter_trees.jpg" alt="Trees in Winter" data-index="3">

        <img class="small" src="ice_cream.png" alt="Eating Ice Cream in Germany" data-index="4">

        <img class="small" src="mountains.jpg" alt="Mountains over the Lake" data-index="5">

    </div>


    <script>
        let images = document.getElementsByClassName("small");
        for (let i = 0; i < images.length; i++) {
            images[i].addEventListener("mouseover", onMouseOver);
            images[i].addEventListener("click", makeBigger); 
            images[i].addEventListener("mouseout", onMouseOut);
        }
        function onMouseOver() {
            // if it's not a big-image, add grayscale filter 
            let elem = document.getElementsByClassName("small");
            if (!this.classList.contains("big-image")) {
                this.classList.add("filter");
            } 
        }
        function onMouseOut() {
            let elem = document.getElementsByClassName("small");
            // if not big-image, remove class "filter" from image:
            if (!this.classList.contains("big-image")) {
                this.classList.remove("filter");
            }   
        }
        function makeBigger() {

            this.setAttribute("class", "big-image");    //change image's class
            //create close button and set its class:
            let close_btn = document.createElement("button");
            close_btn.innerHTML = "Close";
            close_btn.setAttribute("class", "close_btn");
            // make background blurry:  (might use later)
            // document.getElementById("image_container").setAttribute("class", "blur");
            // document.getElementsByTagName("body")[0].appendChild(this);
            document.getElementById("image_container").appendChild(close_btn);
            //I WONDER IF IT'S OK TO HAVE ADDEVENT LISTENER INSIDE FUNCTION:
            document.getElementsByClassName("close_btn")[0].addEventListener("click", closeImage);
        }

        function closeImage() {
            //close the image:
            let e = document.getElementsByClassName("big-image")[0];
            e.classList.remove("small");
            e.setAttribute("class", "small");
            let parent = document.getElementById("image_container");
            parent.removeChild(document.getElementsByClassName("close_btn")[0]);
        }

    </script>
</body>

</html>